---
layout: post
title:  "구글드라이브 api v2, v3, gdrive 비교하기"
category: coding
---

지난번 구글드라이브 api를 사용하면서 의문이 들었습니다.

본래 gdrive라는 CLI 유틸리티를 사용하고 있었으나 ([gdrive 바로가기](https://github.com/prasmussen/gdrive))

이를 google drive api로 바꾸자 체감 속도가 확 빨라진 것이였습니다.

그래서 본격 속도측정을 해보았습니다.

저는 업로드 기능을 주로 사용하기에 업로드만 가지고 테스트하였습니다.

임의로 2, 4, 10mb의 용량을 가지는 파일을 만들어 주었습니다.

윈도우에서 cmd창에 fsutil file createnew (filename) (size)

를 입력하면 임의 사이즈의 파일을 만들 수 있습니다.

#### 예시) 2mb 파일 만들기
~~~
fsutil file createnew 2mb.jpg 2097152

(2097152 = 1024(kb) * 1024(mb) * 2)
~~~

![]({{ site.img_url }}/googledrive_api/14.png)

이를 10번씩 업로드 해 보았습니다.

#### 일해라 Python

~~~
repeat : 10
v3 : 62.98
v2 : 59.19
vg : 81.58
~~~

v3는 62.98초

v2는 59.19초

gdrive는 81.58초가 나왔네요

속도는 v2 > v3 > gdrive 순인듯 합니다.

왜 버전이 올라갔는데 더 느려진걸까요?

다시한번 테스트 해 보았습니다.

이번엔 20번을 돌려봤습니다.

#### 일해라 Python

~~~
repeat : 20
v3 : 114.05
v2 : 114.19
vg : 155.9
~~~

미묘한 차이입니다.

확실한건 gdrive가 1.3배정도 느리네요.

이번엔 512mb 파일과 1gb파일을 추가해서 10번씩 돌려보았습니다.

#### 일해라 Python

~~~
repeat : 10
v3 : 938.31
v2 : 883.2
vg : 1816.62
~~~

v2가 v3보다 확실히 빠르네요.

gdrive는 저 멀리 가있습니다.

큰 차이는 안나지만 (1.6gb정도 10번에 50초차이) v2가 제일 빠른 것으로 판명되었습니다.

확실한 비교를 위해 엑셀을 켜보았습니다.

### api V3

| 2mb  | 4mb  | 10mb | 512mb |  1gb  |
|:---- |:----:|:----:|:-----:| -----:|
| 1.32 | 1.61 | 1.75 | 23.1  | 45.02 |
| 1.35 | 1.63 | 1.98 | 24.52 | 45.37 |
| 1.37 | 1.66 | 2.03 | 25.58 | 50.07 |
| 1.46 | 1.7  | 2.07 | 28.48 | 50.5  |
| 1.57 | 1.75 | 2.18 | 33.22 | 51.87 |
| 1.65 | 1.82 | 2.24 | 33.88 | 51.95 |
| 1.74 | 1.86 | 2.36 | 34.71 | 54.22 |
| 1.95 | 1.93 | 2.86 | 38.84 | 59.41 |
| 2.6  | 2.01 | 2.91 | 40.23 | 62.75 |
| 4.35 | 2.07 | 3.01 | 54.83 | 68.97 | 


### api V2

| 2mb  | 4mb  | 10mb | 512mb |  1gb  |
|:---- |:----:|:----:|:-----:| -----:|
| 1.37 | 1.75 |	1.85 | 22.67 | 43.19 |
| 1.46 | 1.79 |	1.93 | 22.82 | 44.51 |
| 1.48 | 1.82 |	2.23 | 25.51 | 49.34 |
| 1.5  | 1.83 |	2.41 | 26.86 | 49.51 |
| 1.53 | 1.85 |	2.48 | 27.32 | 50.21 |
| 1.58 | 1.92 |	2.67 | 29.22 | 51.88 |
| 1.8  | 1.95 |	2.82 | 32.22 | 54.5  |
| 1.82 | 1.97 |	2.93 | 32.61 | 58.78 |
| 1.84 | 2.07 |	3.15 | 33.38 | 60.81 |
| 2.48 | 2.1  |	3.43 | 34.4  | 71.65 |


### gdrive

| 2mb  | 4mb  | 10mb | 512mb |  1gb  |
|:---- |:----:|:----:|:-----:| -----:|
| 1.78 | 2.14 |	3.38 | 55.64 | 107.04| 
| 1.79 | 2.22 |	3.38 | 55.86 | 109.04| 
| 1.86 | 2.26 |	3.39 | 55.89 | 111.88| 
| 1.93 | 2.28 |	3.55 | 55.95 | 112.77| 
| 1.98 | 2.36 |	3.56 | 57.47 | 114.58| 
| 2    | 2.44 |	3.6  | 58.32 | 114.63| 
| 2.11 | 2.44 |	3.62 | 58.45 | 116.37| 
| 2.26 | 2.48 |	3.93 | 59.24 | 119.7 | 
| 2.26 | 2.61 |	3.98 | 61.09 | 120.11| 
| 2.34 | 2.68 |	6.1  | 63.29 | 126.59| 



실행해보면서 느낀건 버전에 따른 차이(v2, v3)도 있지만 업로드 할 때 회선 상태의 영향도 큰 것 같습니다.

하지만 반복 실험으로 속도는 v2가 제일 빠른 것으로 판단하였습니다.

결과에 따라 v2로 바꿔야 맞겠지만 다른 할게 많으므로 여기까지 하겠습니다. (ㅋㅋ)

이상으로 비교글을 마칩니다.


