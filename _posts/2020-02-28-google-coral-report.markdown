---
layout: post
title:  "Google Coral dev board 사용후기"
categories: [coding, chat]
---

지난 2주간 구글의 Coral dev board와 함께했습니다.

![]({{ site.img_url }}/google_coral_report/1.jpg)

처음 받아서 라즈베리파이와 비교해본 사진

사용하면서 느낀 점을 나열해 보도록 하겠습니다.

성능면에서 살짝 애매한 느낌이 들었습니다.

CPU는 NXP의 i.MX 8M Soc로 쿼드코어의 Cortex-A53 하나와 Cortex-M4F 하나가 들어가 있습니다.

CPU가 좋으면 좋지만.. 그래픽 출력을 따로 하지도 않을거라 크게 신경쓰지 않았습니다.

제일 문제가 되는건 RAM이였습니다.

1G 모델밖에 없는데(차후 2G, 4G도 나온다고 합니다.) 무슨 작업을 하려하면 매번 터집니다.

swap 파일은 필수가 되었습니다.

외부 연결 장치는 USB A 3.0이 하나, USB-C OTG가 하나 있습니다.

그 외 스피커 연결 포트등이 있지만 크게 쓰진 않았습니다.
음성 관련 ML을 한다면 사용하지 않을까 예상하고 있습니다.

네트워크 연결을 위해 기가빗 이더넷과 802.11 b/g/n/ac를 지원하는 와이파이가 내장되어 있습니다.

### 사용해보니?

결론만 말하면, **애매하다**였습니다.

모델 구동을 위한 tflite가 기본적으로 설치되어 있습니다.

모델을 생성하기 위한 tensorflow는 별도로 설치해 주어야 합니다.

mnist 정도는 학습 후 양자화, edgetpu용으로 변환까지 가능합니다.

물론 메모리가 부족하여 swap file은 필수입니다. 

whl을 이용해서 설치가 가능한데, scipy가 설치되지 않아 추가적인 작업에 어려움이 있었습니다.

### 카메라 (Coral Camera)

MIPI CSI-2 방식의 카메라를 사용합니다.

라즈베리파이 카메라와 호환이 불가능하여 별도로 구매해야 합니다.

자동 초점 기능과, 1920 x 1080 @ 60 Hz를 지원합니다.

혹은 USB A 커넥터를 통해 USB 캠을 사용할 수 있습니다.

### 어디에 쓸까?

단호하게 말하자면, 학습 - 모델 생성으로 이어지는 과정에는 부적합합니다.

램이 부족하여 터지기 일쑤, TPU를 학습에 사용할 수 있는 방법이 없어(제가 못찾은 것일수도 있습니다.) 속도도 느립니다.

그렇다면 어디 사용할 것인가?

현재 지원하고 있는 Classify 와 Detection API는 이미지 인식에 잘 작동하고, 속도도 빠른 것으로 확인하였습니다.

Flask를 이용하여 스트리밍 하는데 30fps정도가 나왔습니다.

카메라를 이용한 실시간 이미지 Classify 혹은 Detection에는 충분히 사용 가능합니다.

Teachable AI를 이용하면 edgetpu용 모델을 손쉽게 만들 수 있습니다.

Teachable AI + edgeTPU + @가 관건이라 생각합니다.

![]({{ site.img_url }}/google_coral_report/2.png)

edgeTPU로 실시간 가위바위보 인식을 하며 30fps을 유지하는 것으로 마무리 하겠습니다.